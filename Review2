tuyá»‡t vá»i ğŸ‘ â€” báº¡n Ä‘ang thá»±c hÃ nh Ä‘Ãºng tinh tháº§n **Martin Clean Code**: khÃ´ng chá»‰ â€œcháº¡y Ä‘Æ°á»£câ€ mÃ  cÃ²n pháº£i â€œÄ‘á»c Ä‘Æ°á»£c â€“ hiá»ƒu Ä‘Æ°á»£c â€“ báº£o trÃ¬ Ä‘Æ°á»£câ€.

DÆ°á»›i Ä‘Ã¢y lÃ  bÃ i **review chi tiáº¿t tá»«ng dÃ²ng vÃ  tá»•ng káº¿t tá»«ng bÃ i code (code 1 â†’ 5)**
Má»—i bÃ i mÃ¬nh sáº½:

* âœ… Ä‘Ã¡nh giÃ¡ **Æ°u Ä‘iá»ƒm / nhÆ°á»£c Ä‘iá»ƒm**
* ğŸ’¬ ghi chÃº chi tiáº¿t theo **Clean Code principles**
* ğŸ§® **cháº¥m Ä‘iá»ƒm /100**
* ğŸ¯ tá»•ng káº¿t **Ä‘á» xuáº¥t cáº£i tiáº¿n**

---

## ğŸ§± **Code 1: `Practice.BubbleSorter`**

```java
package Practice;

public class BubbleSorter {

    private double[] mArray = {};   // âš ï¸ NÃªn Ä‘á»ƒ final hoáº·c null check â€“ khá»Ÿi táº¡o {} gÃ¢y nháº§m lÃ  máº£ng rá»—ng.

    public BubbleSorter(double[] array) {
        setArray(array);            // âœ… tá»‘t, tÃ¡ch setter giÃºp tÃ¡i sá»­ dá»¥ng
    }

    public void setArray(double[] newArray) {
        this.mArray = newArray;     // âš ï¸ chÆ°a cÃ³ null check
    }

    public void printArray() {
        for (double num : mArray) { // âœ… rÃµ rÃ ng, clean
            System.out.print(num + " ");
        }
        System.out.println();
    }

    public void startSort() {
        printArray();               // âš ï¸ in ra input á»Ÿ Ä‘Ã¢y nÃªn tÃ¡ch riÃªng â€” khÃ´ng nÃªn logic láº«n IO
        sortArray();
        printArray();
    }

    private void sortArray() {
        int arrayLength = mArray.length;
        boolean isSwapped;

        for (int currentPass = 0; currentPass < arrayLength - 1; currentPass++) {
            isSwapped = false;

            for (int currentIndex = 0; currentIndex < arrayLength - currentPass - 1; currentIndex++) {
                if (shouldSwap(currentIndex)) {
                    swap(currentIndex, currentIndex + 1);
                    isSwapped = true;
                }
            }

            if (!isSwapped) {       // âœ… early exit â€“ optimization tá»‘t
                break;
            }
        }
    }

    private boolean shouldSwap(int index) {
        return mArray[index] > mArray[index + 1]; // âœ… rÃµ rÃ ng
    }

    private void swap(int currentIndex, int nextIndex) {
        double temp = mArray[currentIndex];
        mArray[currentIndex] = mArray[nextIndex];
        mArray[nextIndex] = temp;
    }

    public static void main(String[] args) {
        BubbleSorter sorter = new BubbleSorter(new double[] {5, 3, 8, 4, 6});
        sorter.startSort();
    }
}
```

### ğŸ’¬ Review tá»•ng quÃ¡t:

âœ… **Æ¯u Ä‘iá»ƒm:**

* Äáº·t tÃªn rÃµ rÃ ng, dá»… Ä‘á»c (`shouldSwap`, `sortArray`, `swap`)
* CÃ³ **early exit** â€“ giáº£m sá»‘ vÃ²ng láº·p thá»«a
* Cáº¥u trÃºc hÃ m nhá», dá»… hiá»ƒu

âš ï¸ **NhÆ°á»£c Ä‘iá»ƒm:**

* KhÃ´ng cÃ³ xá»­ lÃ½ **ascending/descending**
* KhÃ´ng cÃ³ **input validation** (null, máº£ng rá»—ng)
* `startSort()` láº«n logic vÃ  IO â†’ vi pháº¡m **Single Responsibility**
* KhÃ´ng cÃ³ testable API (chá»‰ in ra console)
* KhÃ´ng dÃ¹ng constant cho â€œorderâ€ â†’ magic logic

ğŸ¯ **Äiá»ƒm: 75/100**

---

## ğŸ§± **Code 2: `cleancode3.bubblesort.BubbleSort`**

```java
public static final String ASCENDING_SORT = "ascending";
public static final String DESCENDING_SORT = "descending";  // âœ… trÃ¡nh magic string
```

* âœ… Tá»‘t: sá»­ dá»¥ng constant giÃºp dá»… báº£o trÃ¬.

```java
isValidSortOrder(sortOrder); // âš ï¸ tÃªn sai, nÃªn lÃ  validateSortOrder (chÆ°a tráº£ boolean)
```

* HÃ m cÃ³ side effect (throw exception) nhÆ°ng tÃªn â€œisValidâ€¦â€ gá»£i Ã½ boolean â†’ âŒ khÃ´ng chuáº©n semantic.

```java
if (!elementsSwapped) break; // âœ… optimization tá»‘t
```

```java
private static boolean compareAndSwap(int[] array, int currentIndex, String sortOrder) {
    if (ASCENDING_SORT.equalsIgnoreCase(sortOrder)) {
        if (array[currentIndex] > array[currentIndex + 1]) {
            swap(array, currentIndex);
            return true;
        }
```

* âš ï¸ Cáº¥u trÃºc `if` láº·p láº¡i 2 nhÃ¡nh gáº§n giá»‘ng nhau â€“ nÃªn trá»«u tÆ°á»£ng hÃ³a `shouldSwap` â†’ DRY.

```java
private static void swap(int[] array, int currentIndex) {
    int temp = array[currentIndex];
    array[currentIndex] = array[currentIndex + 1];
    array[currentIndex + 1] = temp;
}
```

* âœ… Ä‘Æ¡n giáº£n, Ä‘Ãºng chá»©c nÄƒng.

### ğŸ’¬ Tá»•ng káº¿t:

âœ… **Æ¯u Ä‘iá»ƒm:**

* CÃ³ háº±ng sá»‘ `ASCENDING_SORT`, `DESCENDING_SORT`
* CÃ³ input validation
* Early exit `break`
* Code tÃ¡ch nhá», rÃµ rÃ ng

âš ï¸ **NhÆ°á»£c Ä‘iá»ƒm:**

* HÃ m `isValidSortOrder` Ä‘áº·t sai tÃªn â†’ **nÃªn lÃ ** `validateSortOrder`
* `compareAndSwap()` hÆ¡i rÆ°á»m (if-else láº·p)
* KhÃ´ng clone array â†’ **thay Ä‘á»•i dá»¯ liá»‡u gá»‘c**
* Main test khÃ´ng rÃµ output giá»¯a láº§n 1 / láº§n 2 (sáº¯p xáº¿p láº¡i cÃ¹ng máº£ng)

ğŸ¯ **Äiá»ƒm: 85/100**

---

## ğŸ§± **Code 3: `cleancode3.bubblesort.BubbleSorter` + Main**

âœ… há»— trá»£ cáº£ `int[]` vÃ  `double[]`
âœ… sá»­ dá»¥ng `Number` vÃ  **overload** â€“ ráº¥t linh hoáº¡t.

```java
validateSortOrder(sortOrder); // âœ… tá»‘t
```

```java
boolean isSorted;
do {
    isSorted = true;
    for (...) {
        if (shouldSwap(...)) {
            swap(...);
            isSorted = false;
        }
    }
} while (!isSorted);
```

* âœ… cáº¥u trÃºc rÃµ rÃ ng, dá»… hiá»ƒu
* âš ï¸ hiá»‡u nÄƒng hÆ¡i kÃ©m hÆ¡n (vÃ¬ luÃ´n cháº¡y thÃªm 1 vÃ²ng sau khi sorted)

```java
private static boolean shouldSwap(Number currentElement, Number nextElement, String sortOrder) {
    if (sortOrder.equals(ASCENDING)) {
        return currentElement.doubleValue() > nextElement.doubleValue();
    } else {
        return currentElement.doubleValue() < nextElement.doubleValue();
    }
}
```

* âœ… tÃ¡i sá»­ dá»¥ng cho cáº£ `int[]`, `double[]`
* âš ï¸ `sortOrder.equals(ASCENDING)` â†’ nÃªn dÃ¹ng `.equalsIgnoreCase`
* âš ï¸ chÆ°a handle `null` input array

### ğŸ’¬ Tá»•ng káº¿t:

âœ… **Æ¯u Ä‘iá»ƒm:**

* Code sáº¡ch, rÃµ
* TÃ¡ch biá»‡t logic vÃ  test (Main riÃªng)
* CÃ³ thá»ƒ má»Ÿ rá»™ng cho nhiá»u kiá»ƒu dá»¯ liá»‡u
* Enum-like constants

âš ï¸ **NhÆ°á»£c Ä‘iá»ƒm:**

* Hiá»‡u nÄƒng chÆ°a tá»‘i Æ°u (vÃ²ng do-while)
* KhÃ´ng cÃ³ null-check array
* DÃ¹ng String thay vÃ¬ enum `SortOrder`

ğŸ¯ **Äiá»ƒm: 90/100**

---

## ğŸ§± **Code 4: `cleancode3.BubbleSort` (vá»›i Scanner input)**

âœ… ÄÃ¢y lÃ  phiÃªn báº£n hÆ°á»›ng ngÆ°á»i dÃ¹ng â€“ cÃ³ IO + validate nháº­p.

```java
String sortDirection = directionOrder.toLowerCase(); // âœ… normalize input
```

```java
if (sortDirection.contains("ascend")) { ... } // âš ï¸ khÃ´ng nÃªn dÃ¹ng contains â†’ dá»… lá»—i
```

â†’ vÃ­ dá»¥ `"descending"` cÅ©ng chá»©a `"ascend"` pháº§n Ä‘áº§u, gÃ¢y bug tiá»m áº©n.

```java
System.out.println("Nháº­p cÃ¡c sá»‘ trong máº£ng (cÃ¡ch nhau báº±ng dáº¥u cÃ¡ch):");
```

âœ… thÃ¢n thiá»‡n ngÆ°á»i dÃ¹ng, tuy nhiÃªn:

* âš ï¸ láº«n IO vÃ  logic â†’ khÃ³ test tá»± Ä‘á»™ng
* âš ï¸ khÃ´ng clone array
* âš ï¸ class name trÃ¹ng `BubbleSort` â†’ dá»… nháº§m vá»›i version khÃ¡c

```java
private static boolean isValidDirection(String direction) {
    return "ascending".equals(direction) || "descending".equals(direction);
}
```

âœ… RÃµ rÃ ng, clean, dá»… Ä‘á»c.

### ğŸ’¬ Tá»•ng káº¿t:

âœ… **Æ¯u Ä‘iá»ƒm:**

* CÃ³ input validation, xá»­ lÃ½ nháº­p sai
* Code dá»… hiá»ƒu cho ngÆ°á»i má»›i
* TÃ¡ch Ä‘Æ°á»£c cÃ¡c hÃ m nhá»

âš ï¸ **NhÆ°á»£c Ä‘iá»ƒm:**

* IO + logic trá»™n láº«n â†’ vi pháº¡m SRP
* contains("ascend") bug logic
* KhÃ´ng dÃ¹ng enum hoáº·c constant
* KhÃ´ng cÃ³ early exit optimization

ğŸ¯ **Äiá»ƒm: 70/100**

---

## ğŸ§± **Code 5: `cleancode3.bubblesort.BubbleSort` (Factory + Abstract class)**

ğŸ‘ ÄÃ¢y lÃ  **thiáº¿t káº¿ tá»‘t nháº¥t** trong 5 bÃ i â€” gáº§n chuáº©n *Martin Clean Code + OOP design pattern*.

```java
BubbleSortFactory.createBubbleSortImp("ascending"); // âœ… Factory pattern Ä‘Ãºng chuáº©n
```

```java
abstract class BubbleSortImp {
    protected float[] mInputNumber;
    ...
    public void sortAndPrint(float[] inputNumber) { ... } // âœ… rÃµ rÃ ng
```

```java
public void sort() {
    int number_count = mInputNumber.length;
    for (int i = 0; i < number_count - 1; i++) {
        if (!isSorted(number_count - i - 1)) {
            break;
        }
    }
}
```

* âœ… CÃ³ early exit
* âš ï¸ TÃªn `isSorted()` khÃ´ng Ä‘Ãºng chá»©c nÄƒng (thá»±c ra lÃ  â€œperformPassâ€)
* âš ï¸ Logic láº·p giá»¯a `ascending`/`descending` â€” tá»‘t hÆ¡n dÃ¹ng interface `Comparator<Float>`

```java
class BubbleSortAscending extends BubbleSortImp {
    @Override
    public boolean needSwap(int index) {
        return mInputNumber[index] > mInputNumber[index + 1];
    }
}
```

âœ… Ráº¥t clean â€” má»—i subclass chá»‰ Ä‘á»‹nh nghÄ©a Ä‘iá»u kiá»‡n so sÃ¡nh.

### ğŸ’¬ Tá»•ng káº¿t:

âœ… **Æ¯u Ä‘iá»ƒm:**

* Ãp dá»¥ng **Factory + Template Method pattern**
* TÃ¡ch biá»‡t rÃµ trÃ¡ch nhiá»‡m: Factory / Base / Variant
* Dá»… má»Ÿ rá»™ng (cÃ³ thá»ƒ thÃªm â€œRandomSortâ€, â€œCustomSortâ€)
* CÃ³ early exit tá»‘i Æ°u
* In káº¿t quáº£ rÃµ rÃ ng, cÃ³ OOP cáº¥u trÃºc tá»‘t

âš ï¸ **NhÆ°á»£c Ä‘iá»ƒm:**

* TÃªn hÃ m `isSorted()` gÃ¢y hiá»ƒu láº§m â†’ nÃªn Ä‘á»•i `performPass()`
* KhÃ´ng cÃ³ null-check
* ChÆ°a generic (`float[]` cá»‘ Ä‘á»‹nh)
* Cáº§n enum `SortOrder` thay vÃ¬ string

ğŸ¯ **Äiá»ƒm: 95/100**

---

# ğŸ Tá»•ng káº¿t so sÃ¡nh

| BÃ i   | MÃ´ táº£ ngáº¯n              | Æ¯u Ä‘iá»ƒm chÃ­nh                 | NhÆ°á»£c Ä‘iá»ƒm chÃ­nh                     | Äiá»ƒm   |
| ----- | ----------------------- | ----------------------------- | ------------------------------------ | ------ |
| **1** | Basic class, procedural | Clear functions, easy to read | KhÃ´ng cÃ³ order, láº«n IO               | **75** |
| **2** | Static clean version    | CÃ³ constants, early exit      | HÃ m Ä‘áº·t tÃªn sai, khÃ´ng clone         | **85** |
| **3** | Generic kiá»ƒu dá»¯ liá»‡u    | Clean, overload, reusable     | KhÃ´ng tá»‘i Æ°u do-while                | **90** |
| **4** | CÃ³ giao diá»‡n console    | Dá»… dÃ¹ng, cÃ³ validation        | contains bug, láº«n IO                 | **70** |
| **5** | OOP + Factory Pattern   | Chuáº©n clean architecture      | TÃªn hÃ m chÆ°a chÃ­nh xÃ¡c, chÆ°a generic | **95** |

---

# ğŸ§  Tá»•ng nháº­n xÃ©t theo **Martin Clean Code**

| Principle                       | Code 1 | Code 2 | Code 3 | Code 4 | Code 5 |
| ------------------------------- | ------ | ------ | ------ | ------ | ------ |
| **Meaningful Names**            | âœ…      | âœ…      | âœ…      | âœ…      | âœ…âœ…     |
| **Small Functions**             | âœ…      | âœ…      | âœ…âœ…     | âœ…      | âœ…âœ…     |
| **SRP (Single Responsibility)** | âš ï¸     | âœ…      | âœ…      | âŒ      | âœ…âœ…     |
| **Avoid Duplication (DRY)**     | âœ…      | âš ï¸     | âœ…      | âš ï¸     | âœ…      |
| **Clarity over Cleverness**     | âœ…      | âœ…      | âœ…      | âœ…      | âœ…      |
| **Extensibility**               | âš ï¸     | âš ï¸     | âœ…      | âŒ      | âœ…âœ…     |
| **Error Handling**              | âš ï¸     | âœ…      | âš ï¸     | âœ…      | âœ…      |

---

ğŸ‘‰ **Gá»£i Ã½ chung Ä‘á»ƒ Ä‘áº¡t 100/100:**

1. DÃ¹ng **Enum SortOrder** thay vÃ¬ string
2. Validate **null / empty** input
3. KhÃ´ng in trá»±c tiáº¿p trong logic â€” tÃ¡ch riÃªng `printResult()` hoáº·c `Main`
4. ThÃªm **unit test (JUnit)** thay vÃ¬ `System.out`
5. DÃ¹ng **Generic + Comparator<T>** Ä‘á»ƒ sort má»i kiá»ƒu (Integer, Double, String, etc.)

---

Náº¿u báº¡n muá»‘n, mÃ¬nh cÃ³ thá»ƒ giÃºp viáº¿t **phiÃªn báº£n 100/100 chuáº©n Clean Code** (vá»›i Enum, Generic, JUnit test class, vÃ  Factory pattern).
ğŸ‘‰ Báº¡n cÃ³ muá»‘n mÃ¬nh táº¡o phiÃªn báº£n Ä‘Ã³ (cÃ³ cáº£ commit history gá»£i Ã½ Ä‘á»ƒ push GitHub) khÃ´ng?
